<div class="mb-md">
  <!-- No selection -->
  <div *ngIf="!selectedJob" class="test-package-none-selected">
    <h3>Select a scoring job to view more details</h3>
  </div>
  <ng-container *ngIf="selectedJob">
    <span class="h3 blue-dark">Job ID: {{selectedJob.id}}</span>
    <label class="date-label">Date Created (UTC): {{ selectedJob?.createdAt.toUTCString() }}</label>
  </ng-container>

  <!-- Success view -->
  <div *ngIf="selectedJob?.status === 'FINISHED'" class="test-package-details-success">
    <h3>
      <i class="fa fa-check-circle"></i>
      The test results transmission package was successfully re-scored
    </h3>
  </div>

  <!-- Failure view -->
  <div *ngIf="selectedJob?.steps.length > 0" class="scoring-job-details">
    <div class="test-package-job-error-list-container">
      <p-dataTable [value]="selectedJob.steps"
                   dataKey="id"
                   tableStyleClass="table table-striped table-hover"
                   sortField="createdAt"
                   sortOrder="-1"
                   [scrollable]="true"
                   scrollHeight="230px">
        <p-column field="jobStepTarget" header="System" [sortable]="false" [style]="{width:'100px'}"></p-column>
        <p-column field="createdAt" header="Date" [sortable]="true"[style]="{width:'200px'}">
          <ng-template let-job="rowData" pTemplate="body">
            {{ job.createdAt.toLocaleString()}}
          </ng-template>
        </p-column>
        <p-column field="status" header="Status" [sortable]="false" [style]="{width:'105px'}">
          <ng-template let-job="rowData" pTemplate="body">
            <span *ngIf="job.status === 'SUCCESS'" class="green">{{ job.status}}</span>
            <span *ngIf="job.status === 'FAIL'" class="red">{{ job.status}}</span>
            <span *ngIf="job.status !== 'SUCCESS' && job.status !== 'FAIL'">{{ job.status}}</span>
          </ng-template>
        </p-column>
        <p-column field="description" header="Description"></p-column>
      </p-dataTable>
      <div class="scoring-action-buttons">
        <label>Overall Status: {{ selectedJob?.status }}</label>
        <button class="btn btn-default" [attr.disabled]="!selectedJob?.originalTrtSaved ? '' : null"
                (click)="downloadOriginalTrt(selectedJob?.id)">
          <i class="fa fa-download"></i> Original TRT
        </button>
        <button class="btn btn-default" [attr.disabled]="!selectedJob?.complete ? '' : null"
                (click)="downloadRescoredTrt(selectedJob?.id)">
          <i class="fa fa-download"></i> Re-scored TRT
        </button>
        <button class="btn btn-default" [attr.disabled]="!selectedJob?.complete ? '' : null"
                (click)="downloadScoringValidationReport(selectedJob?.id)">
          <i class="fa fa-download"></i> Scoring Validation Report
        </button>
      </div>
    </div>
  </div>

</div>
